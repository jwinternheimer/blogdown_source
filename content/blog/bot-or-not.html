---
date: 2018-03-05T09:33:43-05:00
type: "post"
tags: []
title: "Bot Or No Bot?"
subtitle: "Identifying Twitter bots with machine learning"
---



<p>I happened to come across <a href="https://twitter.com/kearneymw/status/970070047073951744">this Tweet</a> from Mike Kearney about a new package called <code>botornot</code> that classifies Twitter profiles into two categories: “bot” or “not”.</p>
<div class="figure">
<img src="https://media.makeameme.org/created/bots-bots-9c4m68.jpg" />

</div>
<p>After seeing this, I couldn’t <em>not</em> take it for a spin. Let’s determine which of the Buffer team’s profiles are most bot-like, and test the models on profiles that are known to be spammy accounts.</p>
<pre class="r"><code># load libraries
library(rtweet)
library(dplyr)
library(botornot)
library(openssl)</code></pre>
<p>We’ll use the <code>rtweet</code> package to gather tweets from <a href="https://twitter.com/buffer/lists/the-buffer-team">the Buffer team Twitter list</a>.</p>
<pre class="r"><code># gather tweets
tweets &lt;- search_tweets(&quot;list:buffer/the-buffer-team&quot;, n = 5000)</code></pre>
<p>Now we can gather the usernames from these tweets.</p>
<pre class="r"><code># gather usernames
users &lt;- unique(tweets$screen_name)
users</code></pre>
<pre><code>##  [1] &quot;hjharnis&quot;        &quot;Mike_Eck&quot;        &quot;Brian_G_Peters&quot; 
##  [4] &quot;danmulc1&quot;        &quot;katie_womers&quot;    &quot;Maxberthelot&quot;   
##  [7] &quot;kevanlee&quot;        &quot;alfred_lua&quot;      &quot;kellybakes&quot;     
## [10] &quot;tiggreen&quot;        &quot;kiriappeee&quot;      &quot;eric_khun&quot;      
## [13] &quot;Kalendium&quot;       &quot;hitherejoe&quot;      &quot;thedarcypeters&quot; 
## [16] &quot;karamcnair&quot;      &quot;joelgascoigne&quot;   &quot;suprasannam&quot;    
## [19] &quot;A_Farmer&quot;        &quot;emplums&quot;         &quot;ay8s&quot;           
## [22] &quot;TTGonda&quot;         &quot;RoyOlende&quot;       &quot;moreofmorris&quot;   
## [25] &quot;bufferreply&quot;     &quot;JordanMorgan10&quot;  &quot;bufferdevs&quot;     
## [28] &quot;Ashread_&quot;        &quot;julietchen&quot;      &quot;stevenc81&quot;      
## [31] &quot;hamstu&quot;          &quot;julheimer&quot;       &quot;KarinnaBriseno&quot; 
## [34] &quot;bufferlove&quot;      &quot;no_good3r&quot;       &quot;redman&quot;         
## [37] &quot;courtneyseiter&quot;  &quot;goku2&quot;           &quot;josemdev&quot;       
## [40] &quot;juliabreathes&quot;   &quot;davechapman&quot;     &quot;twanlass&quot;       
## [43] &quot;FedericoWeber&quot;   &quot;CaroKopp&quot;        &quot;parmly&quot;         
## [46] &quot;natemhanson&quot;     &quot;hailleymari&quot;     &quot;michael_erasmus&quot;
## [49] &quot;Bonnie_Hugs&quot;     &quot;mwermuth&quot;        &quot;hannah_voice&quot;   
## [52] &quot;ariellemargot&quot;   &quot;djfarrelly&quot;      &quot;toddba&quot;         
## [55] &quot;stephe_lee&quot;      &quot;jntrry&quot;          &quot;nystroms&quot;       
## [58] &quot;BorisTroja&quot;      &quot;nmillerbooks&quot;    &quot;mickmahady&quot;     
## [61] &quot;ivanazuber&quot;      &quot;_pioul&quot;          &quot;OCallaghanDavid&quot;</code></pre>
<p>Now we can employ the <code>botornot</code> function and arrange the profiles by most bot-like to least. According to the package’s <a href="https://github.com/mkearney/botornot">README</a>, the default (gradient boosted) model uses both users-level (bio, location, number of followers and friends, etc.) and tweets-level (number of hashtags, mentions, capital letters, etc. in a user’s most recent 100 tweets) data to estimate the probability that users are bots. For larger data sets, this method can be quite slow. Due to Twitter’s REST API rate limits, users are limited to only 180 estimates per every 15 minutes.</p>
<p>I’ll obfuscate the usernames for privacy’s sake, but they can easily be found by reproducing the steps in this analysis.</p>
<pre class="r"><code># get bot probability estimates
data &lt;- botornot(users)

# hash the usernames
data$user_hash &lt;- md5(data$user)

# arrange by prob ests
data %&gt;% 
  arrange(desc(prob_bot)) %&gt;% 
  select(-user)</code></pre>
<pre><code>## # A tibble: 63 x 2
##    prob_bot user_hash                       
##       &lt;dbl&gt; &lt;chr&gt;                           
##  1    0.999 3ff40b69a60e6210f3cbda8db1cb4ae2
##  2    0.988 3e921417f41b66f1c24862710537f192
##  3    0.985 d093563010eedd85801769f91909265d
##  4    0.964 712a4384e6681bd521c5266e16789c29
##  5    0.906 0edb7ec9098076761bd14c9c3ca97bd3
##  6    0.899 6ed84e511f386eb4942cfab089b02602
##  7    0.897 db82005412c13e740c03860b29aec7b7
##  8    0.894 8dc5886d5c56e75b89ab191e0e5958cd
##  9    0.889 a1d8e95101f88a8d7ef65d5106b7183c
## 10    0.886 fa3d30c0919008e2ab8b5e87192a13ac
## # ... with 53 more rows</code></pre>
<p>Ok.. the model assigns a probability of over 90% to five of my teammates. Working for a company like Buffer, I can understand why this model might assign a higher-than-average probability of being a bot account. We tend to share many articles, use hashtags, and retweet a lot. Even so, these probabilities seem to be a bit too high for accounts that I know not to be bots. :)</p>
<p>Let’s now look at a group of accounts that are indeed spammy, and test the model’s output.</p>
<pre class="r"><code># list spammy accounts
spammy &lt;- c(&#39;BadAdviceDog&#39;, &#39;HakuiiParadise&#39;, &#39;SimsProbIems&#39;, &#39;iLikeVinesDaily&#39;, &#39;0GM10S&#39;,
            &#39;nazeer_mumtaz&#39;, &#39;newsbreakph&#39;, &#39;sinceresexts&#39;, &#39;uNaz9&#39;, &#39;ocalastyle&#39;, &#39;ApparelPorn&#39;, &#39;jawned&#39;)

# get botornot estimates
data &lt;- botornot(spammy, fast = TRUE)

# view prob ests
data %&gt;% arrange(desc(prob_bot))</code></pre>
<pre><code>## # A tibble: 10 x 2
##    user            prob_bot
##    &lt;chr&gt;              &lt;dbl&gt;
##  1 nazeer_mumtaz     0.971 
##  2 0GM10S            0.555 
##  3 jawned            0.476 
##  4 newsbreakph       0.318 
##  5 BadAdviceDog      0.304 
##  6 uNaz9             0.181 
##  7 SimsProbIems      0.160 
##  8 iLikeVinesDaily   0.0781
##  9 HakuiiParadise    0.0691
## 10 ocalastyle        0.0479</code></pre>
<p>Interestingly, these accounts seem to have a lower average probability of being bots than the Buffer team’s accounts!</p>
<p>All in all, it’s been fun to play with this package. I could imagine something like this being used as a weighted input in a spam prediction model, however I’ll wait a while before putting it into production. :)</p>
